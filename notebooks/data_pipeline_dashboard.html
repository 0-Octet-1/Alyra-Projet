<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PMR Data Pipeline Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            padding: 40px;
        }

        .pipeline-section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 1.8em;
            color: #2c3e50;
            margin-bottom: 20px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .pipeline-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .pipeline-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
        }

        .pipeline-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-color: #3498db;
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-icon {
            font-size: 2em;
            margin-right: 15px;
        }

        .card-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #2c3e50;
        }

        .card-description {
            color: #6c757d;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .btn-danger:hover {
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
        }

        .btn-success:hover {
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }

        .status-indicator {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #95a5a6;
        }

        .status-ready {
            background: #27ae60;
            animation: pulse 2s infinite;
        }

        .status-running {
            background: #f39c12;
            animation: pulse 1s infinite;
        }

        .status-error {
            background: #e74c3c;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .terminal {
            background: #2c3e50;
            color: #ecf0f1;
            border-radius: 10px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
            display: none;
        }

        .terminal.show {
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #ecf0f1;
            border-radius: 3px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2980b9);
            width: 0%;
            transition: width 0.3s ease;
        }

        .quick-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .quick-btn {
            flex: 1;
            min-width: 200px;
        }

        .info-panel {
            background: #e8f4fd;
            border-left: 4px solid #3498db;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .warning-panel {
            background: #fef9e7;
            border-left: 4px solid #f39c12;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ PMR Data Pipeline Dashboard</h1>
            <p>Interface de gestion compl√®te pour le projet de certification PMR</p>
        </div>

        <div class="main-content">
            <!-- Section Pipeline Principal -->
            <div class="pipeline-section">
                <h2 class="section-title">üîÑ Pipeline de Donn√©es Principal</h2>
                
                <div class="pipeline-grid">
                    <!-- √âtape 1: G√©n√©ration -->
                    <div class="pipeline-card">
                        <div class="status-indicator" id="status-generation"></div>
                        <div class="card-header">
                            <div class="card-icon">üèóÔ∏è</div>
                            <div class="card-title">G√©n√©ration des Donn√©es</div>
                        </div>
                        <div class="card-description">
                            G√©n√®re un dataset brut de 4000 √©chantillons PMR avec 11 variables d'accessibilit√©.
                        </div>
                        <button class="btn" onclick="runScript('data_generation.py', 'generation')">
                            G√©n√©rer Dataset Brut
                        </button>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-generation"></div>
                        </div>
                    </div>

                    <!-- √âtape 2: S√©paration -->
                    <div class="pipeline-card">
                        <div class="status-indicator" id="status-splitting"></div>
                        <div class="card-header">
                            <div class="card-icon">‚úÇÔ∏è</div>
                            <div class="card-title">S√©paration des Donn√©es</div>
                        </div>
                        <div class="card-description">
                            Split stratifi√© en Train (70%), Validation (15%) et Test (15%).
                        </div>
                        <button class="btn" onclick="runScript('data_splitting.py', 'splitting')">
                            S√©parer les Donn√©es
                        </button>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-splitting"></div>
                        </div>
                    </div>

                    <!-- √âtape 3: Preprocessing -->
                    <div class="pipeline-card">
                        <div class="status-indicator" id="status-preprocessing"></div>
                        <div class="card-header">
                            <div class="card-icon">üîß</div>
                            <div class="card-title">Preprocessing</div>
                        </div>
                        <div class="card-description">
                            Imputation, standardisation et encodage des variables.
                        </div>
                        <button class="btn" onclick="runScript('data_preprocessing.py', 'preprocessing')">
                            Preprocesser les Donn√©es
                        </button>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-preprocessing"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section Mod√©lisation -->
            <div class="pipeline-section">
                <h2 class="section-title">ü§ñ Mod√©lisation Machine Learning</h2>
                
                <div class="pipeline-grid">
                    <!-- ML Training -->
                    <div class="pipeline-card">
                        <div class="status-indicator" id="status-ml"></div>
                        <div class="card-header">
                            <div class="card-icon">üìä</div>
                            <div class="card-title">Entra√Ænement ML</div>
                        </div>
                        <div class="card-description">
                            Entra√Æne Random Forest et Logistic Regression avec optimisation des hyperparam√®tres.
                        </div>
                        <button class="btn btn-success" onclick="runMLTraining()">
                            Entra√Æner Mod√®les ML
                        </button>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-ml"></div>
                        </div>
                    </div>

                    <!-- DL Training -->
                    <div class="pipeline-card">
                        <div class="status-indicator" id="status-dl"></div>
                        <div class="card-header">
                            <div class="card-icon">üß†</div>
                            <div class="card-title">Deep Learning</div>
                        </div>
                        <div class="card-description">
                            Entra√Æne des r√©seaux de neurones (ANN) pour comparaison avec ML.
                        </div>
                        <button class="btn btn-success" onclick="runDLTraining()">
                            Entra√Æner Mod√®les DL
                        </button>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-dl"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Actions Rapides -->
            <div class="pipeline-section">
                <h2 class="section-title">‚ö° Actions Rapides</h2>
                
                <div class="quick-actions">
                    <button class="btn quick-btn" onclick="runFullPipeline()">
                        üöÄ Pipeline Complet
                    </button>
                    <button class="btn btn-danger quick-btn" onclick="cleanAll()">
                        üßπ Tout Nettoyer
                    </button>
                    <button class="btn quick-btn" onclick="checkStatus()">
                        üìä V√©rifier Statut
                    </button>
                </div>
            </div>

            <!-- Informations -->
            <div class="info-panel">
                <h3>üìã Instructions d'utilisation</h3>
                <p><strong>1.</strong> Ex√©cutez les √©tapes dans l'ordre : G√©n√©ration ‚Üí S√©paration ‚Üí Preprocessing</p>
                <p><strong>2.</strong> Une fois les donn√©es pr√™tes, lancez l'entra√Ænement ML puis DL</p>
                <p><strong>3.</strong> Utilisez "Pipeline Complet" pour automatiser toutes les √©tapes</p>
                <p><strong>4.</strong> "Tout Nettoyer" supprime toutes les donn√©es pour recommencer</p>
            </div>

            <div class="warning-panel">
                <h3>‚ö†Ô∏è Important</h3>
                <p>Cette interface g√©n√®re des commandes PowerShell. Assurez-vous d'√™tre dans le bon r√©pertoire et d'avoir activ√© votre environnement virtuel.</p>
            </div>

            <!-- Terminal de sortie -->
            <div class="terminal" id="terminal">
                <div id="terminal-content">Pr√™t √† ex√©cuter les commandes...</div>
            </div>
        </div>
    </div>

    <script>
        // √âtat global
        let isRunning = false;
        let currentStep = null;

        // Fonction pour afficher le terminal
        function showTerminal() {
            document.getElementById('terminal').classList.add('show');
        }

        // Fonction pour ajouter du texte au terminal
        function addToTerminal(text) {
            const terminal = document.getElementById('terminal-content');
            terminal.innerHTML += '<br>' + text;
            terminal.scrollTop = terminal.scrollHeight;
        }

        // Fonction pour mettre √† jour le statut
        function updateStatus(step, status) {
            const indicator = document.getElementById(`status-${step}`);
            indicator.className = 'status-indicator';
            
            switch(status) {
                case 'ready':
                    indicator.classList.add('status-ready');
                    break;
                case 'running':
                    indicator.classList.add('status-running');
                    break;
                case 'error':
                    indicator.classList.add('status-error');
                    break;
                default:
                    break;
            }
        }

        // Fonction pour mettre √† jour la barre de progression
        function updateProgress(step, percent) {
            const progressBar = document.getElementById(`progress-${step}`);
            progressBar.style.width = percent + '%';
        }

        // Fonction g√©n√©rique pour ex√©cuter un script
        function runScript(scriptName, stepName) {
            if (isRunning) {
                alert('Un script est d√©j√† en cours d\'ex√©cution !');
                return;
            }

            isRunning = true;
            currentStep = stepName;
            
            showTerminal();
            updateStatus(stepName, 'running');
            updateProgress(stepName, 0);
            
            addToTerminal(`üöÄ Ex√©cution de ${scriptName}...`);
            addToTerminal(`üìÅ Commande: python ${scriptName}`);
            addToTerminal('‚è≥ En cours...');
            
            // Simulation de progression
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 20;
                if (progress > 90) progress = 90;
                updateProgress(stepName, progress);
            }, 500);

            // Simulation d'ex√©cution (remplacer par vraie ex√©cution)
            setTimeout(() => {
                clearInterval(progressInterval);
                updateProgress(stepName, 100);
                updateStatus(stepName, 'ready');
                addToTerminal(`‚úÖ ${scriptName} termin√© avec succ√®s !`);
                addToTerminal('üìä R√©sultats disponibles dans les dossiers correspondants.');
                isRunning = false;
                currentStep = null;
            }, 3000);

            // Afficher la commande √† copier
            addToTerminal('');
            addToTerminal('üìã Commande √† ex√©cuter dans PowerShell :');
            addToTerminal(`cd notebooks && python ${scriptName}`);
        }

        // Fonction pour l'entra√Ænement ML
        function runMLTraining() {
            showTerminal();
            addToTerminal('ü§ñ Cr√©ation du script ML unifi√©...');
            addToTerminal('üìã Commande √† ex√©cuter :');
            addToTerminal('cd notebooks');
            addToTerminal('# Cr√©er d\'abord le script ML complet, puis :');
            addToTerminal('python ml_training_complete.py');
        }

        // Fonction pour l'entra√Ænement DL
        function runDLTraining() {
            showTerminal();
            addToTerminal('üß† Pr√©paration du Deep Learning...');
            addToTerminal('üìã Commande √† ex√©cuter :');
            addToTerminal('cd notebooks');
            addToTerminal('# Cr√©er d\'abord le script DL, puis :');
            addToTerminal('python dl_training.py');
        }

        // Fonction pour le pipeline complet
        function runFullPipeline() {
            showTerminal();
            addToTerminal('üöÄ PIPELINE COMPLET PMR');
            addToTerminal('=====================================');
            addToTerminal('üìã S√©quence compl√®te √† ex√©cuter :');
            addToTerminal('');
            addToTerminal('cd notebooks');
            addToTerminal('python data_generation.py');
            addToTerminal('python data_splitting.py');
            addToTerminal('python data_preprocessing.py');
            addToTerminal('python ml_training_complete.py');
            addToTerminal('python dl_training.py');
            addToTerminal('');
            addToTerminal('üéâ Pipeline termin√© ! Mod√®les pr√™ts pour d√©ploiement.');
        }

        // Fonction pour nettoyer
        function cleanAll() {
            if (confirm('‚ö†Ô∏è √ätes-vous s√ªr de vouloir supprimer toutes les donn√©es g√©n√©r√©es ?')) {
                showTerminal();
                addToTerminal('üßπ NETTOYAGE COMPLET');
                addToTerminal('==================');
                addToTerminal('üìã Commande √† ex√©cuter :');
                addToTerminal('cd notebooks && python clean_all_data.py');
                addToTerminal('');
                addToTerminal('‚ö†Ô∏è Cette action supprimera :');
                addToTerminal('- Toutes les donn√©es g√©n√©r√©es');
                addToTerminal('- Tous les mod√®les entra√Æn√©s');
                addToTerminal('- Tous les caches Python');
            }
        }

        // Fonction pour v√©rifier le statut
        function checkStatus() {
            showTerminal();
            addToTerminal('üìä V√âRIFICATION DU STATUT');
            addToTerminal('========================');
            addToTerminal('üìã Commandes pour v√©rifier :');
            addToTerminal('');
            addToTerminal('# V√©rifier les donn√©es :');
            addToTerminal('ls ../data/raw/');
            addToTerminal('ls ../data/split/');
            addToTerminal('ls ../data/preprocessed/');
            addToTerminal('');
            addToTerminal('# V√©rifier les mod√®les :');
            addToTerminal('ls ../models/');
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            addToTerminal('üéØ PMR Data Pipeline Dashboard initialis√©');
            addToTerminal('üìã Pr√™t √† ex√©cuter les scripts de donn√©es et mod√©lisation');
        });
    </script>
</body>
</html>
